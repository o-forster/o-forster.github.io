<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Your Cart | Rokichi</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
body {
  font-family: 'Poppins', sans-serif;
  background-color: #faf9f7;
  padding: 20px;
  max-width: 800px;
  margin: auto;
  color: #333;
}
h1 { text-align: center; margin-bottom: 30px; }
table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: center; }
th { background-color: #f0f0f0; }
td img { height: 60px; border-radius: 6px; margin-right: 8px; vertical-align: middle; }
td a { color: #2980b9; font-weight: 600; text-decoration: none; }
td a:hover { text-decoration: underline; color: #1c5980; }
.remove-btn { background: #c0392b; color: white; padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; }
.remove-btn:hover { background: #a93226; }
.checkout-btn { background: #27ae60; color: white; font-size: 1rem; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; display: block; margin: 20px auto 0; font-weight: 600; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.15); transition: background-color 0.3s ease, box-shadow 0.3s ease; }
.checkout-btn:hover { background: #1e8449; }
.empty { text-align: center; color: #777; font-size: 1.2rem; }
.return-btn { background: #2980b9; color: white; font-size: 1rem; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; display: block; margin: 40px auto 0; font-weight: 600; text-align: center; text-decoration: none; box-shadow: 0 4px 6px rgba(0,0,0,0.15); transition: background-color 0.3s ease, box-shadow 0.3s ease; }
.return-btn:hover { background: #1c5980; box-shadow: 0 6px 12px rgba(0,0,0,0.25); }
footer { text-align: center; font-size: 13px; color: #999; margin-top: 60px; }

/* Shipping Box */
#shipping-box { border: 1px solid #ddd; padding: 20px; border-radius: 6px; margin-bottom: 20px; background-color: #fff; }
#shipping-box label { display: block; margin: 10px 0 4px; font-weight: 600; }
#shipping-box input, #shipping-box select { width: 100%; padding: 8px; font-size: 1rem; border-radius: 4px; border: 1px solid #ccc; }
#calculate-shipping { margin-top: 15px; width: 100%; }
#shipping-cost { margin-top: 10px; font-weight: 600; text-align: center; }
#total-display { margin-top: 10px; font-weight: 700; text-align: center; font-size: 1.2rem; }
</style>
</head>
<body>

<h1>Your Cart</h1>

<div id="cart-container" aria-live="polite"></div>

<div id="shipping-box">
  <h2>Shipping Details</h2>
  <label for="address1">Address Line 1 *</label>
  <input type="text" id="address1" placeholder="Street address, P.O. box, company name, etc." required>
  <label for="address2">Address Line 2</label>
  <input type="text" id="address2" placeholder="Apartment, suite, unit, building, floor, etc.">
  <label for="city">City *</label>
  <input type="text" id="city" placeholder="City" required>
  <label for="postcode">Postcode / ZIP *</label>
  <input type="text" id="postcode" placeholder="Postcode" required>
  <label for="country">Country *</label>
  <select id="country" required>
    <option value="">Select a country</option>
  </select>
  <button id="calculate-shipping" class="checkout-btn">Calculate Shipping</button>
  <div id="shipping-cost"></div>
</div>

<div id="total-display"></div>
<button class="checkout-btn">Proceed to Checkout</button>

<a href="index.html" class="return-btn">← Return to Main Site</a>

<footer>
  <p>© 2025 Rokichi. All rights reserved.</p>
</footer>

<script>
// Populate country dropdown
const countrySelect = document.getElementById('country');
const countries = ["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic of the","Congo, Republic of the","Costa Rica","Côte d’Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, North","Korea, South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","Spain","Sri Lanka","Sudan","Sudan, South","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"];
countries.forEach(c => countrySelect.add(new Option(c,c)));

// Cart
const cartContainer = document.getElementById('cart-container');
let cart = JSON.parse(localStorage.getItem('cart')) || [];
cart = cart.map(item => ({ ...item, price: Number(item.price) || 0, currency: item.currency || "GBP" }));

function renderCart() {
  if(cart.length === 0){
    cartContainer.innerHTML = '<p class="empty">Your cart is empty.</p>';
    return;
  }
  let html = '<table><tr><th>Item</th><th>Price</th><th>Remove</th></tr>';
  cart.forEach((item,i)=>{
    html += `<tr>
      <td>${item.img?`<img src="${item.img}" alt="${item.name}">`:''}<a href="${item.url}">${item.name}</a></td>
      <td>${item.currency} £${item.price.toFixed(2)}</td>
      <td><button class="remove-btn" onclick="removeItem(${i})">Remove</button></td>
    </tr>`;
  });
  html += '</table>';
  cartContainer.innerHTML = html;
  updateTotal();
}

function removeItem(index){
  cart.splice(index,1);
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();
}

function updateTotal(){
  const shipping = Number(localStorage.getItem('shippingCost')) || 0;
  const total = cart.reduce((sum,item)=>sum+item.price,0)+shipping;
  document.getElementById('total-display').innerText = `Total: £${total.toFixed(2)}`;
}

// Calculate shipping
document.getElementById('calculate-shipping').addEventListener('click',()=>{
  const country = document.getElementById('country').value.trim();
  if(!country || !document.getElementById('address1').value || !document.getElementById('city').value || !document.getElementById('postcode').value){
    alert('Please fill in all required fields.');
    return;
  }
  let shipping = 0;
  const euCountries = ["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"];
  if(country==="United Kingdom") shipping = 3.99;
  else if(euCountries.includes(country)) shipping = 9.99;
  else if(country==="United States") shipping = 24.99;
  else shipping = 39.99;
  localStorage.setItem('shippingCost', shipping);
  document.getElementById('shipping-cost').innerText = `Shipping: £${shipping.toFixed(2)}`;
  updateTotal();
});

// Proceed to checkout
document.querySelector('.checkout-btn').addEventListener('click',()=>{
  const shipping = Number(localStorage.getItem('shippingCost')) || 0;
  if(!shipping){
    alert('Please calculate shipping before proceeding to checkout.');
    return;
  }
  const checkoutData = { cart: cart, shippingCost: shipping };
  localStorage.setItem('checkoutData', JSON.stringify(checkoutData));
  window.location.href = 'checkout.html';
});

renderCart();
</script>

</body>
</html>

